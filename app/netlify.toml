# Settings for the [build] key are global and are applied to
# all deploy contexts unless overridden by a context-specific setting.
[build]
  # Default build command.
  functions = "/"
  publish = "/"
  command = "npm run build"
  environment = { NODE_VERSION = "22.8.0" }

# Redirects for role-based access control donâ€™t use the 'to' property.
# The following redirect is intended for use with most SPAs
# that handle routing internally.

[functions]
  external_node_modules = ["express"]
  node_bundler = "esbuild"
  included_files = ["**"]


[[redirects]]
  from = "/"
  to = "/api/wall"

[[redirects]]
  from = "/*"
  to = ".netlify/functions/:splat"
  force = true
  status = 200

[[redirects]]
  from = '/api/:lang/:type'
  to = '/public/assets/:lang_:type.m3u'
  force = true
  status = 200
